@0
BEGIN:MOV UP ACC
JEZ ZERO
ONE:SWP
# ACC =! ACC
SUB 1
NEG
JMP OUT
ZERO: SAV

OUT: MOV ACC DOWN

#JNZ BEGIN
#SAV

@1
BEGIN:MOV UP ACC
JEZ ZERO
ONE:SWP
# ACC =! ACC
SUB 1
NEG
JMP OUT
ZERO: SAV

OUT: MOV ACC DOWN

#JNZ BEGIN
#SAV

@2
BEGIN:MOV UP ACC
JEZ ZERO
ONE:SWP
# ACC =! ACC
SUB 1
NEG
JMP OUT
ZERO: SAV

OUT: MOV ACC DOWN

#JNZ BEGIN
#SAV

@3
BEGIN:MOV UP ACC
JEZ ZERO
ONE:SWP
# ACC =! ACC
SUB 1
NEG
JMP OUT
ZERO: SAV

OUT: MOV ACC DOWN

#JNZ BEGIN
#SAV

@4
#IN1 PASS
MOV UP RIGHT

@5
#IN1&2 PASS
MOV UP ACC
JNZ OUT2
# GOT TIME
MOV LEFT ACC
# IN1: 0:O0
# IN1: 1:O1
# => CONVENIENT
JMP OUT



OUT2: MOV LEFT ACC
MOV 2 ACC
OUT: MOV ACC DOWN

@6
#IN3 PASS
MOV UP RIGHT

@7
#IN3&4 PASS
MOV UP ACC
JNZ OUT4
# GOT TIME
MOV LEFT ACC
JEZ OUT #INT3 0:O0
OUT3:MOV 3 ACC#ELS
JMP OUT


OUT4: MOV LEFT ACC
MOV 4 ACC
OUT: MOV ACC DOWN

@8
#BAK = LAST
#ONE: INT=TRUE
#OUT: OUTPUT
#O<N>: OUT N

##IF ONE
#SWP->OLD INTERUPT
#IF 0: NEW-INT (1)
#IF 1: ALL GOOD(0)
##IF ZERO
#BACKUP 0 AS LAST
#


MOV UP RIGHT

@9
#FINAL OUTPUT
MOV LEFT ACC
ADD RIGHT

MOV ACC DOWN

@10
MOV UP LEFT